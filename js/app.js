(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o)}}function e(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==t(e)?e:String(e)}function r(t){var n="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var u=new(t.bind.apply(t,r));return e&&i(u,e.prototype),u}(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},r(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function i(t,n){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},i(t,n)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}const c=function(e){function r(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,i=arguments,e=u(e=r),function(n,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)}(n,o()?Reflect.construct(e,i||[],u(n).constructor):e.apply(n,i));var n,e,i}var c,a,l;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&i(t,n)}(r,e),c=r,l=[{key:"doAction",value:function(t){"create"===t&&r.doCreateAction()}},{key:"doCreateAction",value:function(){document.querySelector("buffer-area").createPolygons()}}],(a=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="\n          <style>\n            :host {   \n                display: flex;\n                justify-content: space-evenly;\n                flex-wrap: wrap;\n                align-items: center;\n                gap: 20px;\n            }\n            button {\n                background-color: var(--button-bg-color);\n                padding: 10px 20px;\n                border: none;\n                border-radius: 3px;\n                cursor: pointer;\n                transition: background-color 0.3s;\n            }\n            button:hover {\n                background-color: var(--button-hover-bg-color);\n            }\n            button:active {\n                background-color: var(--button-active-bg-color);\n            }\n            .app-toolbar-right-cnt {\n                display: flex;\n                gap: 20px;\n                align-items: center;\n            }\n          </style>\n          <button data-action='create'>Создать</button>\n          <div class='app-toolbar-right-cnt'>\n            <button data-action='save'>Сохранить</button>\n            <button data-action='clear'>Сбросить</button>\n          </div>\n        ",this.addActionsListeners()}},{key:"addActionsListeners",value:function(){this.shadowRoot.querySelectorAll("button[data-action]").forEach((function(t){t.addEventListener("click",(function(){r.doAction(t.dataset.action)}))}))}}])&&n(c.prototype,a),l&&n(c,l),Object.defineProperty(c,"prototype",{writable:!1}),r}(r(HTMLElement));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var n=function(t,n){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(n)?n:String(n)}function p(t){var n="function"==typeof Map?new Map:void 0;return p=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var o=new(t.bind.apply(t,r));return e&&y(o,e.prototype),o}(t,arguments,b(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),y(e,t)},p(t)}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function y(t,n){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},y(t,n)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}const d=function(t){function n(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,r=arguments,e=b(e=n),function(t,n){if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,r||[],b(t).constructor):e.apply(t,r));var t,e,r}var e,r;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&y(t,n)}(n,t),e=n,(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="\n            <style>\n              :host {   \n                    display: grid;\n                    height: 100%;\n                    grid-template-rows: 80px max-content minmax(300px, 1fr);\n                    grid-template-columns: 1fr;\n                    gap: 8px;\n                    background-color: var(--header-color);\n              }\n              :host > ::slotted(*) {\n                background-color: var(--bg-color);\n              }\n              ::slotted(app-toolbar) {\n                grid-row: 1 / span 1;\n              }\n              ::slotted(buffer-area) {\n                grid-row: 2 / span 1;\n                min-height: 240px;\n              }\n              ::slotted(work-area) {\n                grid-row: 3 / span 1;\n              }\n            </style>\n            <slot name='toolbar'></slot>\n            <slot name='buffer-area'></slot>\n            <slot name='work-area'></slot>\n          "}}])&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),n}(p(HTMLElement));function h(t,n){var e=Math.random()*(n-t)+t;return Math.floor(e)}function v(t){var n=t.start,e=t.end,r=t.stepsCount,o=t.includeStart,i=void 0!==o&&o,u=t.includeEnd,c=(e-n)/r;return n+h(i?0:1,void 0!==u&&u?r+1:r)*c}function m(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[e*t[0]+r*n[0],e*t[1]+r*n[1]]}function g(t,n){return Math.abs(t-n)<1e-6}function w(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function O(t){var n=t.width,e=t.height,r=function(t){for(var n=t.vertsCount,e=t.width,r=t.height,o=[e/2,r/2],i=2*Math.PI/n,u=[],c=0;c<n;++c){var a=v({start:c*i,end:(c+1)*i-i/3,stepsCount:10,includeStart:!0}),l=[Math.cos(a),Math.sin(a)],f=m(o,l,1,j({vertVector:l,centerPoint:o,width:e,height:r,radiusStepsCount:10}));u.push(f)}return u}(t),o=n,i=0,u=e,c=0;r.forEach((function(t){var n,e,r=(e=2,function(t){if(Array.isArray(t))return t}(n=t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;a=!1}else for(;!(a=(r=i.call(e)).done)&&(c.push(r.value),c.length!==n);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=e.return&&(u=e.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(n,e)||function(t,n){if(t){if("string"==typeof t)return w(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(t,n):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],l=r[1];o=a<o?a:o,i=a>i?a:i,u=l<u?l:u,c=l>c?l:c}));var a=r.reduce((function(t,n){return"".concat(t," ").concat(n[0]-o,",").concat(n[1]-u)}),"");return{width:i-o,height:c-u,points:a}}function j(t){var n,e=t.vertVector,r=t.centerPoint,o=t.width,i=t.height,u=t.radiusStepsCount,c=function(t){var n=t.centerPoint,e=t.lineVector,r=t.width,o=t.height;if(g(e[1],0))return null;var i=c(-n[1]/e[1]);if(i)return i;var u=c((o-n[1])/e[1]);if(u)return u;function c(t){if(t<0)return null;var o=m(n,e,1,t);return o[0]<0||o[0]>r?null:o}return null}(n={lineVector:e,centerPoint:r,width:o,height:i})||function(t){var n=t.centerPoint,e=t.lineVector,r=t.height,o=t.width;if(g(e[0],0))return null;var i=c(-n[0]/e[0]);if(i)return i;var u=c((o-n[0])/e[0]);if(u)return u;function c(t){if(t<0)return null;var o=m(n,e,1,t);return o[1]<0||o[1]>r?null:o}return null}(n);if(!c)throw new Error("error while generating a polygon");var a,l,f,p=(f=(a=r,[(l=c)[0]-a[0],l[1]-a[1]]),Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)));return v({start:p/3,end:p,stepsCount:u,includeEnd:!0})}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function P(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var n=function(t,n){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(n)?n:String(n)}function k(t){var n="function"==typeof Map?new Map:void 0;return k=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(x())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var o=new(t.bind.apply(t,r));return e&&_(o,e.prototype),o}(t,arguments,M(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),_(e,t)},k(t)}function x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(x=function(){return!!t})()}function _(t,n){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},_(t,n)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}const T=function(t){function n(){var t,e,r,o;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=this,r=n,r=M(r),t=function(t,n){if(n&&("object"===S(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(e,x()?Reflect.construct(r,o||[],M(e).constructor):r.apply(e,o))).polygonsData=null,t}var e,r,o;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&_(t,n)}(n,t),e=n,o=[{key:"observedAttributes",get:function(){return["polygons-data"]}},{key:"renderPolygon",value:function(t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("width",t.width),n.setAttribute("height",t.height);var e=document.createElementNS(n.namespaceURI,"polygon");return e.setAttribute("points",t.points),n.append(e),n}}],(r=[{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){var t=this,e=this.polygonsData;if(e){this.innerHTML="";try{e.forEach((function(e){t.append(n.renderPolygon(e))}))}catch(t){console.log(t)}}}},{key:"createPolygons",value:function(){this.polygonsData=function(){for(var t=h(5,20),n=[],e=0;e<t;++e)n.push(O({width:h(80,150),height:h(80,120),vertsCount:h(3,10)}));return n}(),this.render()}},{key:"attributeChangedCallback",value:function(){this.render()}}])&&P(e.prototype,r),o&&P(e,o),Object.defineProperty(e,"prototype",{writable:!1}),n}(k(HTMLElement));customElements.define("app-toolbar",c),customElements.define("main-grid",d),customElements.define("buffer-area",T),document.addEventListener("DOMContentLoaded",(function(){}))})();