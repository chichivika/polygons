(()=>{"use strict";function t(t,e){var n=Math.random()*(e-t)+t;return Math.floor(n)}function e(e){var n=e.start,r=e.end,o=e.stepsCount,i=e.includeStart,u=void 0!==i&&i,c=e.includeEnd,a=(r-n)/o;return n+t(u?0:1,void 0!==c&&c?o+1:o)*a}function n(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[n*t[0]+r*e[0],n*t[1]+r*e[1]]}function r(t,e){return Math.abs(t-e)<1e-6}function o(t){var e=t.clientX,n=t.clientY,r=t.draggedObject,o=t.width,i=t.height;r.style.left="".concat(e+window.scrollX-o/2,"px"),r.style.top="".concat(n+window.scrollY-i/2,"px")}function i(t){return"".concat(t,"-").concat(Math.random().toString(16).slice(2))}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=f(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:String(e)}var s={scale:1,shift:[0,0],bufferPolygons:[],workPolygons:[]},p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=a(a({},s),e);Object.assign(this,n)}var e,n,r;return e=t,r=[{key:"parsePolygonsForSaving",value:function(t){return t.map((function(t){var e=a({},t);return delete e.key,e}))}},{key:"parsePolygonsFromSaving",value:function(t){return t.map((function(t){return a(a({},t),{},{key:i("polygon")})}))}}],(n=[{key:"saveData",value:function(){var e=this,n={};Object.keys(s).forEach((function(r){var o=e[r];switch(r){case"workPolygons":case"bufferPolygons":n[r]=t.parsePolygonsForSaving(o);break;default:n[r]=o}})),localStorage.setItem("storeData",JSON.stringify(n))}},{key:"clearData",value:function(){Object.assign(this,s),localStorage.clear()}}])&&l(e.prototype,n),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const y=new p(function(){var t=localStorage.getItem("storeData");if(t)try{var e=Object.assign(s,JSON.parse(t));return a(a({},e),{},{bufferPolygons:p.parsePolygonsFromSaving(e.bufferPolygons),workPolygons:p.parsePolygonsFromSaving(e.workPolygons)})}catch(t){return{}}return{}}());function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:String(e)}function g(t){var e="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(v())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&m(o,n.prototype),o}(t,arguments,w(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,t)},g(t)}function v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v=function(){return!!t})()}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}const O=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=arguments,n=w(n=e),function(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,v()?Reflect.construct(n,r||[],w(t).constructor):n.apply(t,r));var t,n,r}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(e,t),n=e,o=[{key:"doAction",value:function(t){switch(t){case"create":e.doCreateAction();break;case"save":y.saveData();break;case"clear":y.clearData()}}},{key:"doCreateAction",value:function(){document.querySelector("buffer-area").createPolygons()}}],(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="\n          <style>\n            :host {   \n                display: flex;\n                justify-content: space-evenly;\n                flex-wrap: wrap;\n                align-items: center;\n                gap: 20px;\n            }\n            button {\n                background-color: var(--button-bg-color);\n                padding: 10px 20px;\n                border: none;\n                border-radius: 3px;\n                cursor: pointer;\n                transition: background-color 0.3s;\n            }\n            button:hover {\n                background-color: var(--button-hover-bg-color);\n            }\n            button:active {\n                background-color: var(--button-active-bg-color);\n            }\n            .app-toolbar-right-cnt {\n                display: flex;\n                gap: 20px;\n                align-items: center;\n            }\n          </style>\n          <button data-action='create'>Создать</button>\n          <div class='app-toolbar-right-cnt'>\n            <button data-action='save'>Сохранить</button>\n            <button data-action='clear'>Сбросить</button>\n          </div>\n        ",this.addActionsListeners()}},{key:"addActionsListeners",value:function(){this.shadowRoot.querySelectorAll("button[data-action]").forEach((function(t){t.addEventListener("click",(function(){e.doAction(t.dataset.action)}))}))}}])&&h(n.prototype,r),o&&h(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(g(HTMLElement));function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:String(e)}function S(t){var e="function"==typeof Map?new Map:void 0;return S=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(E())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&C(o,n.prototype),o}(t,arguments,T(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,t)},S(t)}function E(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(E=function(){return!!t})()}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}const A=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=arguments,n=T(n=e),function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,E()?Reflect.construct(n,r||[],T(t).constructor):n.apply(t,r));var t,n,r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(e,t),n=e,(r=[{key:"connectedCallback",value:function(){this.innerHTML="\n            <app-toolbar></app-toolbar>\n            <dnd-wrapper></dnd-wrapper>\n          "}}])&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(S(HTMLElement));function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t){var r=t.width,o=t.height,u=function(t){for(var r=t.vertsCount,o=t.width,i=t.height,u=[o/2,i/2],c=2*Math.PI/r,a=[],l=0;l<r;++l){var f=e({start:l*c,end:(l+1)*c-c/3,stepsCount:10,includeStart:!0}),s=[Math.cos(f),Math.sin(f)],p=n(u,s,1,_({vertVector:s,centerPoint:u,width:o,height:i,radiusStepsCount:10}));a.push(p)}return a}(t),c=r,a=0,l=o,f=0;u.forEach((function(t){var e=x(t,2),n=e[0],r=e[1];c=n<c?n:c,a=n>a?n:a,l=r<l?r:l,f=r>f?r:f}));var s=u.reduce((function(t,e){return"".concat(t," ").concat(e[0]-c,",").concat(e[1]-l)}),"");return{key:i("polygon"),width:a-c,height:f-l,points:s}}function _(t){var o,i=t.vertVector,u=t.centerPoint,c=t.width,a=t.height,l=t.radiusStepsCount,f=function(t){var e=t.centerPoint,o=t.lineVector,i=t.width,u=t.height;if(r(o[1],0))return null;var c=l(-e[1]/o[1]);if(c)return c;var a=l((u-e[1])/o[1]);if(a)return a;function l(t){if(t<0)return null;var r=n(e,o,1,t);return r[0]<0||r[0]>i?null:r}return null}(o={lineVector:i,centerPoint:u,width:c,height:a})||function(t){var e=t.centerPoint,o=t.lineVector,i=t.height,u=t.width;if(r(o[0],0))return null;var c=l(-e[0]/o[0]);if(c)return c;var a=l((u-e[0])/o[0]);if(a)return a;function l(t){if(t<0)return null;var r=n(e,o,1,t);return r[1]<0||r[1]>i?null:r}return null}(o);if(!f)throw new Error("error while generating a polygon");var s,p,y,b=(y=(s=u,[(p=f)[0]-s[0],p[1]-s[1]]),Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)));return e({start:b/3,end:b,stepsCount:l,includeEnd:!0})}function R(t){return{key:t.getAttribute("polygon-key"),width:Number(t.getAttribute("width")),height:Number(t.getAttribute("height")),points:t.getAttribute("points")}}function z(t){var e=document.createElement("generated-polygon");return e.setAttribute("width",t.width),e.setAttribute("height",t.height),e.setAttribute("polygon-key",t.key),e.setAttribute("points",t.points),e}function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X(r.key),r)}}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){var e="function"==typeof Map?new Map:void 0;return I=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(N())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&F(o,n.prototype),o}(t,arguments,W(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,t)},I(t)}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N=function(){return!!t})()}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function Y(t,e,n){return(e=X(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:String(e)}var q=function(e){function n(){var t,e,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=this,r=n,r=W(r),t=function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return L(t)}(e,N()?Reflect.construct(r,o||[],W(e).constructor):r.apply(e,o))).resizeHandler=t.render.bind(L(t)),t}var r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(n,e),r=n,(o=[{key:"connectedCallback",value:function(){window.addEventListener("resize",this.resizeHandler),this.render()}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.resizeHandler)}},{key:"render",value:function(){var t=y.bufferPolygons;this.innerHTML="",this.layoutPolygons(t)}},{key:"appendPolygon",value:function(t){var e=R(t);y.bufferPolygons.push(e);var n=t.getBoundingClientRect(),r=this.getBoundingClientRect();t.style.left="".concat(n.left-r.left,"px"),t.style.top="".concat(n.top-r.top,"px"),this.append(t)}},{key:"removePolygon",value:function(t){var e=R(t);y.bufferPolygons=y.bufferPolygons.filter((function(t){return t.key!==e.key})),t.remove()}},{key:"createPolygons",value:function(){var e=function(e){for(var n=e.maxHeight,r=t(5,20),o=[],i=0;i<r;++i)o.push(D({width:t(80,150),height:t(80,n),vertsCount:t(3,10)}));return o}({maxHeight:n.rowHeight});y.bufferPolygons=e,this.innerHTML="",this.layoutPolygons(e)}},{key:"layoutPolygons",value:function(t){var e=this,r=this.getBoundingClientRect().width,o=t.length,i=n.polygonPadding,u=0,c=i,a=0;t.forEach((function(n,l){var f=c+n.width+i,s=l===o-1;f<r&&!s?c=f:f<r&&s?e.placePolygonsInRow({rowNumber:u,polygonsData:t.slice(a,o),fullWidth:f}):(e.placePolygonsInRow({rowNumber:u,polygonsData:t.slice(a,l),fullWidth:c}),u+=1,c=2*i+n.width,a=l,s&&e.placePolygonsInRow({rowNumber:u,polygonsData:[t.at(-1)],fullWidth:2*i+t.at(-1).width}))})),this.style.height="".concat(120*(u+1),"px")}},{key:"placePolygonsInRow",value:function(t){var e=this,r=t.rowNumber,o=t.polygonsData,i=t.fullWidth,u=(this.getBoundingClientRect().width-i)/2,c=n.polygonPadding,a=u+c;o.forEach((function(t){var o=z(t);o.style.position="absolute",o.style.left="".concat(a,"px"),o.style.top="".concat(r*n.rowHeight+n.rowTopPadding,"px"),e.append(o),a+=t.width+c}))}}])&&B(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}(I(HTMLElement));Y(q,"polygonPadding",5),Y(q,"rowHeight",110),Y(q,"rowTopPadding",5);const U=q;function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){var e="function"==typeof Map?new Map:void 0;return $=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(G())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Q(o,n.prototype),o}(t,arguments,Z(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Q(n,t)},$(t)}function G(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(G=function(){return!!t})()}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function tt(t,e,n){return(e=et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(t){var e=function(t,e){if("object"!=V(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:String(e)}var nt=function(t){function e(){var t,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tt(J((n=this,r=Z(r=e),t=function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return J(t)}(n,G()?Reflect.construct(r,o||[],Z(n).constructor):r.apply(n,o)))),"startDragMouse",null),t.wheelHandler=t.wheel.bind(J(t)),t.resizeHandler=t.resize.bind(J(t)),t.mouseDownHandler=t.startDragging.bind(J(t)),t.mouseMoveHandler=t.doDragging.bind(J(t)),t.mouseUpHandler=t.stopDragging.bind(J(t)),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(e,t),n=e,o=[{key:"getCellSize",value:function(){return e.originCellSize*y.scale}}],(r=[{key:"disconnectedCallback",value:function(){this.removeEventListener("wheel",this.wheelHandler),this.removeEventListener("mousedown",this.mouseDownHandler),window.removeEventListener("resize",this.resizeHandler)}},{key:"connectedCallback",value:function(){this.addEventListener("wheel",this.wheelHandler),this.addEventListener("mousedown",this.mouseDownHandler),window.addEventListener("resize",this.resizeHandler),this.render()}},{key:"render",value:function(){var t=y.shift,n=e.step,r=e.getCellSize();this.innerHTML='\n                <work-ruler cell-size="'.concat(r,'" step="').concat(n,'" align="horizontal" shift=').concat(t[0],'></work-ruler>\n                <work-ruler cell-size="').concat(r,'" step="').concat(n,'" align="vertical" shift=').concat(t[1],'></work-ruler>\n                <work-drag-area cell-size="').concat(r,'" origin-cell-size=').concat(e.originCellSize," \n                                shift-x=").concat(t[0]," shift-y=").concat(t[1],"></work-drag-area>\n              ")}},{key:"wheel",value:function(t){if(t.ctrlKey){t.preventDefault();var n=t.deltaY<0?1:-1,r=e.getCellSize(),o=Math.min(Math.max(r+5*n,e.minCellSize),e.maxCellSize);y.scale=o/e.originCellSize,this.render()}}},{key:"resize",value:function(){this.render()}},{key:"startDragging",value:function(t){var e;t.ctrlKey&&"WORK-AREA"===(null===(e=t.currentTarget)||void 0===e?void 0:e.tagName)&&(this.startDragMouse=[t.clientX,t.clientY],document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),document.body.style.cursor="grab")}},{key:"stopDragging",value:function(t){var n=e.getCellSize(),r=t.clientX-this.startDragMouse[0],o=t.clientY-this.startDragMouse[1];y.shift=[y.shift[0]+r/n,y.shift[1]+o/n],this.startDragMouse=null,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),document.body.style.cursor="auto"}},{key:"getDragArea",value:function(){return this.querySelector("work-drag-area")}},{key:"getRulerY",value:function(){return this.querySelector('work-ruler[align="vertical"]')}},{key:"getRulerX",value:function(){return this.querySelector('work-ruler[align="horizontal"]')}},{key:"doDragging",value:function(t){if(this.startDragMouse){var n=e.getCellSize(),r=t.clientX-this.startDragMouse[0],o=t.clientY-this.startDragMouse[1],i=[y.shift[0]+r/n,y.shift[1]+o/n],u=this.getDragArea();u.setAttribute("shift-x",i[0]),u.setAttribute("shift-y",i[1]),this.getRulerX().setAttribute("shift",i[0]),this.getRulerY().setAttribute("shift",i[1])}}}])&&K(n.prototype,r),o&&K(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}($(HTMLElement));tt(nt,"minCellSize",20),tt(nt,"maxCellSize",70),tt(nt,"step",10),tt(nt,"originCellSize",30);const rt=nt;function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ut(r.key),r)}}function ut(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:String(e)}function ct(t){var e="function"==typeof Map?new Map:void 0;return ct=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(at())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&lt(o,n.prototype),o}(t,arguments,ft(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),lt(n,t)},ct(t)}function at(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(at=function(){return!!t})()}function lt(t,e){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lt(t,e)}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}const st=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=arguments,n=ft(n=e),function(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,at()?Reflect.construct(n,r||[],ft(t).constructor):n.apply(t,r));var t,n,r}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["cell-size","step","vertical","shift"]}}],(r=[{key:"connectedCallback",value:function(){this.style="\n        position: relative;\n        overflow: hidden;\n        font-size: 10px;\n        font-weight: bold;\n        user-select: none;\n    ",this.render()}},{key:"render",value:function(){var t=parseInt(this.getAttribute("cell-size")),e=parseInt(this.getAttribute("step"));if(!Number.isNaN(t)&&!Number.isNaN(e)){this.innerHTML="";var n=this.getBoundingClientRect(),r="vertical"===this.getAttribute("align"),o=r?n.height:n.width,i=Math.floor(o/t);this.renderMarks({vertical:r,marksCount:i,step:e,cellSize:t})}}},{key:"renderMarks",value:function(t){for(var e=t.marksCount,n=t.step,r=t.cellSize,o=t.vertical,i=this.getShift(),u=i%1,c=Math.trunc(i),a=o?1:-1,l=0;l<=e;++l){var f=l*r-a*u*r;if(!(f<0)){var s=n*(l+a*c),p=document.createElement("div");p.style.position="absolute",o?(p.style.right="3px",p.style.bottom="".concat(f,"px")):(p.style.top="3px",p.style.left="".concat(f,"px")),p.innerText="".concat(s),this.append(p)}}}},{key:"getShift",value:function(){return Number(this.getAttribute("shift"))||0}},{key:"attributeChangedCallback",value:function(){this.render()}}])&&it(n.prototype,r),o&&it(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(ct(HTMLElement));function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){Ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gt(t){var e="function"==typeof Map?new Map:void 0;return gt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(vt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&mt(o,n.prototype),o}(t,arguments,wt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mt(n,t)},gt(t)}function vt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vt=function(){return!!t})()}function mt(t,e){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mt(t,e)}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}function Ot(t,e,n){return(e=Pt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(t){var e=function(t,e){if("object"!=pt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pt(e)?e:String(e)}const kt=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return Ot(dt((n=this,r=e,o=[].concat(u),r=wt(r),t=function(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dt(t)}(n,vt()?Reflect.construct(r,o||[],wt(n).constructor):r.apply(n,o)))),"canvasEl",null),Ot(dt(t),"polygonsEl",null),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mt(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["cell-size","origin-cell-size","shift-x","shift-y"]}}],(r=[{key:"connectedCallback",value:function(){if(!this.canvasEl){var t=document.createElement("canvas"),e=this.getBoundingClientRect();t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.style.position="absolute",t.style.bottom="0px",t.style.left="0px",this.canvasEl=t,this.append(t)}if(!this.polygonsEl){var n=document.createElement("div");this.append(n),this.polygonsEl=n}this.render()}},{key:"attributeChangedCallback",value:function(){this.render()}},{key:"render",value:function(){var t=this.canvasEl;if(t){var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height);var n=parseInt(this.getAttribute("cell-size"));null===e||Number.isNaN(n)||(this.drawCells({ctx:e,cellSize:n,width:t.width,height:t.height}),this.renderPolygons())}}},{key:"renderPolygons",value:function(){var t=this,e=this.polygonsEl,n=y.workPolygons,r=[];n.filter((function(e){return t.checkPolygonInView(e)})).forEach((function(e){var n=z(e);n.style.position="absolute";var o=t.getPositionByWorkCoordinates(e);n.style.left="".concat(o.left,"px"),n.style.top="".concat(o.top,"px"),n.style.transform="scale(".concat(t.getScale(),")"),r.push(n)})),e.replaceChildren.apply(e,r)}},{key:"checkPolygonInView",value:function(t){var e=t.workLeft,n=t.workTop,r=this.getBoundingClientRect(),o=this.getWorkCoordinatesByPosition({left:0,top:r.height}),i=o.workLeft,u=o.workTop,c=this.getWorkCoordinatesByPosition({left:r.width,top:0}),a=c.workLeft,l=c.workTop,f=this.getAttribute("origin-cell-size"),s=e+t.width/f,p=n-t.height/f;return(e<=a&&e>=i||s<=a&&s>=i)&&(n<=l&&n>=u||p<=l&&p>=u)}},{key:"getScale",value:function(){return this.getAttribute("cell-size")/this.getAttribute("origin-cell-size")}},{key:"appendPolygon",value:function(t){var e=R(t),n=t.getBoundingClientRect(),r=this.getBoundingClientRect(),o=n.left-r.left,i=n.top-r.top;t.style.left="".concat(o,"px"),t.style.top="".concat(i,"px");var u=this.getWorkCoordinatesByPosition({left:o,top:i});y.workPolygons.push(bt(bt({},e),u)),this.polygonsEl.append(t)}},{key:"removePolygon",value:function(t){var e=R(t);y.workPolygons=y.workPolygons.filter((function(t){return t.key!==e.key})),t.remove()}},{key:"getWorkCoordinatesByPosition",value:function(t){var e=t.left,n=t.top,r=this.getBoundingClientRect(),o=this.getAttribute("cell-size"),i=this.getAttribute("shift-x"),u=this.getAttribute("shift-y");return{workLeft:this.fromPixelsToCoordinate(e-i*o),workTop:this.fromPixelsToCoordinate(r.height-n+u*o)}}},{key:"getPositionByWorkCoordinates",value:function(t){var e=t.workLeft,n=t.workTop,r=this.getBoundingClientRect(),o=this.getAttribute("shift-x"),i=this.getAttribute("shift-y"),u=this.getAttribute("cell-size");return{left:this.fromCoordinateToPixels(e)+o*u,top:r.height+i*u-this.fromCoordinateToPixels(n)}}},{key:"fromPixelsToCoordinate",value:function(t){return t/Number(this.getAttribute("cell-size"))}},{key:"fromCoordinateToPixels",value:function(t){return t*Number(this.getAttribute("cell-size"))}},{key:"drawCells",value:function(t){var e=t.ctx,n=t.cellSize,r=t.width,o=t.height;e.strokeStyle="lightgrey";for(var i=this.getAttribute("shift-x")%1*n,u=this.getAttribute("shift-y")%1*n,c=Math.floor(o/n),a=0;a<=c;++a){e.beginPath();var l=u+o-a*n;e.moveTo(0,l),e.lineTo(r,l),e.stroke()}for(var f=Math.floor(r/n),s=0;s<=f;++s){e.beginPath();var p=i+s*n;e.moveTo(p,0),e.lineTo(p,o),e.stroke()}}}])&&ht(n.prototype,r),o&&ht(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(gt(HTMLElement));function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dt(r.key),r)}}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t){var e="function"==typeof Map?new Map:void 0;return Ct=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Tt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&At(o,n.prototype),o}(t,arguments,xt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),At(n,t)},Ct(t)}function Tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tt=function(){return!!t})()}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},At(t,e)}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}function Mt(t,e,n){return(e=Dt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dt(t){var e=function(t,e){if("object"!=jt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jt(e)?e:String(e)}var _t=function(t){function e(){var t,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mt(Et((n=this,r=xt(r=e),t=function(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Et(t)}(n,Tt()?Reflect.construct(r,o||[],xt(n).constructor):r.apply(n,o)))),"draggedPolygon",null),Mt(Et(t),"draggedInitialPosition",null),Mt(Et(t),"dragFromTarget",null),Mt(Et(t),"bufferArea",null),Mt(Et(t),"workArea",null),t.mouseDownHandler=function(e){t.startDragPolygon(e)},t.mouseMoveHandler=function(e){t.doDragPolygon(e)},t.mouseUpHandler=function(e){t.stopDragPolygon(e)},t}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){var t=this.getBufferArea(),e=this.getWorkArea();this.append(t),this.append(e),t.addEventListener("mousedown",this.mouseDownHandler),e.addEventListener("mousedown",this.mouseDownHandler)}},{key:"getBufferArea",value:function(){return null===this.bufferArea&&(this.bufferArea=document.createElement("buffer-area")),this.bufferArea}},{key:"getWorkArea",value:function(){return null===this.workArea&&(this.workArea=document.createElement("work-area")),this.workArea}},{key:"getWorkDragArea",value:function(){return this.getWorkArea().querySelector("work-drag-area")}},{key:"startDragPolygon",value:function(t){if(!this.draggedPolygon&&"generated-polygon"===t.target.tagName.toLowerCase()){var e=t.target,n=e.getBoundingClientRect();this.draggedInitialPosition={left:n.left,top:n.top,width:n.width,height:n.height};var r=e.cloneNode(!0),i=this.getDragTargetByChild(e);i.removePolygon(e);var u=1;i===this.getBufferArea()&&(u=y.scale,r.style.transform="scale(".concat(u,", ").concat(u,")")),o({clientX:t.clientX,clientY:t.clientY,draggedObject:r,width:this.draggedInitialPosition.width*u,height:this.draggedInitialPosition.height*u}),document.body.append(r),this.draggedPolygon=r,this.dragFromTarget=i,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler)}}},{key:"doDragPolygon",value:function(t){var e=this.draggedPolygon,n=this.draggedInitialPosition;if(e&&n){var r=e.getBoundingClientRect();o({clientX:t.clientX,clientY:t.clientY,draggedObject:e,width:r.width,height:r.height})}}},{key:"getDragTargetByChild",value:function(t){return t?t===this.getBufferArea()||t===this.getWorkDragArea()?t:this.getDragTargetByChild(t.parentElement):null}},{key:"stopDragPolygon",value:function(t){var e=this.draggedPolygon;if(e){e.style.display="none";var n=document.elementFromPoint(t.clientX,t.clientY),r=this.getDragTargetByChild(n);r||(r=this.dragFromTarget,e.style.left="".concat(this.draggedInitialPosition.left,"px"),e.style.top="".concat(this.draggedInitialPosition.top,"px")),e.style.display="block",r===this.getBufferArea()&&(e.style.transform="scale(1,1)"),r.appendPolygon(e),this.clearDragMode()}}},{key:"clearDragMode",value:function(){this.dragFromTarget=null,this.draggedPolygon=null,this.draggedInitialPosition=null,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler)}}],r&&St(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(Ct(HTMLElement));const Rt=_t;function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bt(r.key),r)}}function Bt(t){var e=function(t,e){if("object"!=zt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zt(e)?e:String(e)}function Lt(t){var e="function"==typeof Map?new Map:void 0;return Lt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(It())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Nt(o,n.prototype),o}(t,arguments,Ft(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Nt(n,t)},Lt(t)}function It(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(It=function(){return!!t})()}function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}const Wt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=arguments,n=Ft(n=e),function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,It()?Reflect.construct(n,r||[],Ft(t).constructor):n.apply(t,r));var t,n,r}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["width","height","points","polygonKey"]}}],(r=[{key:"connectedCallback",value:function(){this.shadowRoot||this.attachShadow({mode:"open"}),this.render()}},{key:"render",value:function(){if(this.shadowRoot){var t=this.getAttribute("width"),e=this.getAttribute("height"),n=this.getAttribute("points"),r=this.getAttribute("polygon-key");this.shadowRoot.innerHTML="\n            <style>\n                :host {\n                    fill: var(--polygon-bg-color);\n                    fill-opacity: 0.7;\n                    stroke: var(--polygon-bg-color);\n                    cursor: pointer;\n                    transform-origin: top left;\n                }\n            </style>\n            <svg width=".concat(t," height=").concat(e," data-polygonKey=").concat(r,">\n                <polygon></polygon>\n            </svg>\n            "),this.shadowRoot.querySelector("polygon").setAttribute("points",n)}}},{key:"attributeChangedCallback",value:function(){this.render()}}])&&Ht(n.prototype,r),o&&Ht(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(Lt(HTMLElement));customElements.define("app-toolbar",O),customElements.define("main-grid",A),customElements.define("dnd-wrapper",Rt),customElements.define("buffer-area",U),customElements.define("generated-polygon",Wt),customElements.define("work-area",rt),customElements.define("work-ruler",st),customElements.define("work-drag-area",kt),document.addEventListener("DOMContentLoaded",(function(){}))})();