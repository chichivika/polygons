(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o)}}function e(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==t(e)?e:String(e)}function r(t){var n="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var u=new(t.bind.apply(t,r));return e&&i(u,e.prototype),u}(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},r(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function i(t,n){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},i(t,n)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}const c=function(e){function r(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,i=arguments,e=u(e=r),function(n,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)}(n,o()?Reflect.construct(e,i||[],u(n).constructor):e.apply(n,i));var n,e,i}var c,a;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&i(t,n)}(r,e),c=r,(a=[{key:"connectedCallback",value:function(){var t=this;this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="\n          <style>\n            :host {   \n                display: flex;\n                justify-content: space-evenly;\n                flex-wrap: wrap;\n                align-items: center;\n                gap: 20px;\n            }\n            button {\n                background-color: var(--button-bg-color);\n                padding: 10px 20px;\n                border: none;\n                border-radius: 3px;\n                cursor: pointer;\n                transition: background-color 0.3s;\n            }\n            button:hover {\n                background-color: var(--button-hover-bg-color);\n            }\n            button:active {\n                background-color: var(--button-active-bg-color);\n            }\n            .app-toolbar-right-cnt {\n                display: flex;\n                gap: 20px;\n                align-items: center;\n            }\n          </style>\n          <button data-action='create'>Создать</button>\n          <div class='app-toolbar-right-cnt'>\n            <button data-action='save'>Сохранить</button>\n            <button data-action='clear'>Сбросить</button>\n          </div>\n        ",this.shadowRoot.querySelectorAll("button[data-action]").forEach((function(n){n.addEventListener("click",(function(){t.shadowRoot.dispatchEvent(new CustomEvent("action",{detail:n.dataset.action,composed:!0}))}))}))}}])&&n(c.prototype,a),Object.defineProperty(c,"prototype",{writable:!1}),r}(r(HTMLElement));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var n=function(t,n){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(n)?n:String(n)}function p(t){var n="function"==typeof Map?new Map:void 0;return p=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var o=new(t.bind.apply(t,r));return e&&b(o,e.prototype),o}(t,arguments,d(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b(e,t)},p(t)}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function b(t,n){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},b(t,n)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}const y=function(t){function n(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,r=arguments,e=d(e=n),function(t,n){if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r));var t,e,r}var e,r;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&b(t,n)}(n,t),e=n,(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="\n            <style>\n              :host {   \n                    width: 100%;\n                    height: 100%;\n                    display: grid;\n                    grid-template-rows: 80px 1fr 2fr;\n                    grid-template-columns: 1fr;\n                    gap: 8px;\n                    background-color: var(--header-color);\n              }\n              :host > ::slotted(*) {\n                background-color: var(--bg-color);\n              }\n              ::slotted(app-toolbar) {\n                grid-row: 1 / span 1;\n              }\n              ::slotted(buffer-area) {\n                grid-row: 2 / span 1;\n                min-height: 240px;\n              }\n              ::slotted(work-area) {\n                height: 100%;\n                min-height: 300px;\n                grid-row: 3 / span 1;\n              }\n            </style>\n            <slot name='toolbar'></slot>\n            <slot name='buffer-area'></slot>\n            <slot name='work-area'></slot>\n          "}}])&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),n}(p(HTMLElement));function h(t,n){var e=Math.random()*(n-t)+t;return Math.floor(e)}function v(t){var n=t.start,e=t.end,r=t.stepsCount,o=t.includeStart,i=void 0!==o&&o,u=t.includeEnd,c=(e-n)/r;return n+h(i?0:1,void 0!==u&&u?r+1:r)*c}function w(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[e*t[0]+r*n[0],e*t[1]+r*n[1]]}function g(t,n){return Math.abs(t-n)<1e-6}function m(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=h(70,150),e=h(80,120);t.setAttribute("width","".concat(n)),t.setAttribute("height","".concat(e));var r=document.createElementNS(t.namespaceURI,"polygon");return r.setAttribute("points",function(t){for(var n=t.vertsCount,e=t.width,r=t.height,o=[e/2,r/2],i=2*Math.PI/n,u="",c=0;c<n;++c){var a=v({start:c*i,end:(c+1)*i,stepsCount:10,includeStart:!0}),l=[Math.cos(a),Math.sin(a)],f=w(o,l,1,O({vertVector:l,centerPoint:o,width:e,height:r,radiusStepsCount:10}));u="".concat(u," ").concat(f[0],",").concat(f[1])}return u}({width:n,height:e,vertsCount:h(3,8)})),t.append(r),t}function O(t){var n,e=t.vertVector,r=t.centerPoint,o=t.width,i=t.height,u=t.radiusStepsCount,c=function(t){var n=t.centerPoint,e=t.lineVector,r=t.width,o=t.height;if(g(e[1],0))return null;var i=c(-n[1]/e[1]);if(i)return i;var u=c((o-n[1])/e[1]);if(u)return u;function c(t){if(t<0)return null;var o=w(n,e,1,t);return o[0]<0||o[0]>r?null:o}return null}(n={lineVector:e,centerPoint:r,width:o,height:i})||function(t){var n=t.centerPoint,e=t.lineVector,r=t.height,o=t.width;if(g(e[0],0))return null;var i=c(-n[0]/e[0]);if(i)return i;var u=c((o-n[0])/e[0]);if(u)return u;function c(t){if(t<0)return null;var o=w(n,e,1,t);return o[1]<0||o[1]>r?null:o}return null}(n);if(!c)throw new Error("error while generating a polygon");var a,l,f,p=(f=(a=r,[(l=c)[0]-a[0],l[1]-a[1]]),Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)));return v({start:p/3,end:p,stepsCount:u,includeEnd:!0})}customElements.define("app-toolbar",c),customElements.define("main-grid",y),window.onload=function(){document.querySelector("app-toolbar").addEventListener("action",(function(t){"create"===t.detail&&function(){var t=document.querySelector("buffer-area");t.innerHTML="";for(var n=h(5,20),e=0;e<n;e+=1){var r=m();t.append(r)}}()}))}})();